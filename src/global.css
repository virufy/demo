/* Base RTL when Arabic is active */
html[dir="rtl"],
html[dir="rtl"] body {
  direction: rtl;
}

/* Make text blocks bidi-safe so wrapped lines stay RTL */
html[dir="rtl"] p,
html[dir="rtl"] li,
html[dir="rtl"] h1,
html[dir="rtl"] h2,
html[dir="rtl"] h3,
html[dir="rtl"] h4,
html[dir="rtl"] h5,
html[dir="rtl"] h6,
html[dir="rtl"] label,
html[dir="rtl"] .text,
html[dir="rtl"] .paragraph,
html[dir="rtl"] .instruction {
  text-align: right;
  direction: rtl;
  unicode-bidi: isolate;   /* <- key: prevents wrap from turning LTR */
}

/* If rows with icons/buttons look reversed, mirror them */
html[dir="rtl"] .row,
html[dir="rtl"] .step-row,
html[dir="rtl"] .actions {
  flex-direction: row-reverse;
}

/* Inputs and placeholders */
html[dir="rtl"] input,
html[dir="rtl"] textarea {
  text-align: right;
  direction: rtl;
}

/* Optional: flip arrow images/SVGs when needed */
html[dir="rtl"] .flip-rtl { transform: scaleX(-1); }

/* keep blocks RTL when they wrap */
html[dir="rtl"] p,
html[dir="rtl"] li {
  direction: rtl;
  text-align: right;
  unicode-bidi: isolate;        /* already added earlier */
}

/* isolate inline chunks that often flip the next wrapped line */
html[dir="rtl"] strong,
html[dir="rtl"] b,
html[dir="rtl"] em,
html[dir="rtl"] a,
html[dir="rtl"] span {
  unicode-bidi: isolate;
  direction: rtl;
}

/* for labels like "ملاحظة مهمّة:" at line start */
html[dir="rtl"] .rtl-chunk {
  unicode-bidi: isolate-override;
  direction: rtl;
  display: inline;               /* or inline-block if needed */
}

html[dir="rtl"] p,
html[dir="rtl"] .instruction,
html[dir="rtl"] .text {
  direction: rtl;
  text-align: right;
  unicode-bidi: isolate;  /* ensures wrapped lines stay RTL */
}

html[dir="rtl"] strong,
html[dir="rtl"] b,
html[dir="rtl"] em,
html[dir="rtl"] span {
  unicode-bidi: isolate;
  direction: rtl;
}
