!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).littleStateMachine={},e.react)}(this,function(e,t){var n=new(function(){function e(e){void 0===e&&(e="__LSM__"),this.name=e,this.state={},this.middleWares=[],this.storageType="undefined"!=typeof sessionStorage?window.sessionStorage:{}}var t=e.prototype;return t.updateStore=function(e){this.state=function(e,t){try{return JSON.parse(e.getItem(t))}catch(e){return null}}(this.storageType,this.name)||e},t.updateMiddleWares=function(e){return this.middleWares=e},e}()),r=t.createContext(void 0);e.StateMachineProvider=function(e){var a=e.children,s=t.useState(n.state);return t.createElement(r.Provider,{value:{state:s[0],setState:s[1]}},a)},e.createStore=function(e,t){void 0===t&&(t={name:"__LSM__",middleWares:[]}),t.name&&(n.name=t.name),t.storageType&&(n.storageType=t.storageType),n.updateMiddleWares(t.middleWares),n.updateStore(e)},e.useStateMachine=function(e){var a=t.useContext(r),s=a.state,i=a.setState;return t.useMemo(function(){return{actions:e?Object.entries(e).reduce(function(e,t){var r;return Object.assign({},e,((r={})[t[0]]=function(e,t){return function(r){n.state=t(n.state,r),n.storageType.setItem(n.name,JSON.stringify(n.state)),n.middleWares.length&&(n.state=n.middleWares.reduce(function(e,t){return t(e)||e},n.state)),e(n.state)}}(i,t[1]),r))},{}):{},state:s}},[s,i,e])}});
//# sourceMappingURL=little-state-machine.umd.js.map
